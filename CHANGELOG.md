# PostgreSQLæ€»ç³»ç»Ÿ - æ›´æ–°æ—¥å¿—

æ‰€æœ‰é‡è¦æ›´æ”¹éƒ½å°†è®°å½•åœ¨æ­¤æ–‡ä»¶ä¸­ã€‚

æ ¼å¼åŸºäº [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)

---

## [2.0.0] - 2024-10-02

### æ–°å¢ (Added)

#### æ¶æ„é‡æ–°è®¾è®¡
- âœ¨ å…¨æ–°çš„PostgreSQLæ€»ç³»ç»Ÿæ¶æ„ï¼Œæ”¯æŒ20ä¸ªç«™ç‚¹
- âœ¨ Site4 (ColorMagic) å®Œæ•´è¡¨ç»“æ„å’Œæƒé™é…ç½®
- âœ¨ ç»Ÿä¸€åé¦ˆç³»ç»Ÿï¼ˆunified_feedbackè¡¨ï¼‰
- âœ¨ è¡¨å‰ç¼€ç³»ç»Ÿï¼ˆcolormagic_*, site1_*, site2_*, ...ï¼‰

#### è¡¨ç»“æ„
- âœ¨ `colormagic_users` - ç”¨æˆ·è¡¨ï¼ˆUUIDä¸»é”®ï¼‰
- âœ¨ `colormagic_sessions` - ä¼šè¯è¡¨ï¼ˆæ”¯æŒJWT refresh tokenï¼‰
- âœ¨ `colormagic_analysis_history` - ç”¨æˆ·åˆ†æå†å²è¡¨
- âœ¨ `colormagic_palettes` - æ”¶è—è°ƒè‰²æ¿è¡¨
- âœ¨ `colormagic_usage_stats` - ä½¿ç”¨ç»Ÿè®¡è¡¨
- âœ¨ `colormagic_color_analysis` - é¢œè‰²åˆ†æè®°å½•è¡¨
- âœ¨ `colormagic_export_history` - å¯¼å‡ºå†å²è¡¨
- âœ¨ `unified_feedback` - ç»Ÿä¸€åé¦ˆè¡¨ï¼ˆæ”¯æŒæ‰€æœ‰ç«™ç‚¹ï¼‰

#### ç³»ç»Ÿå‡½æ•°
- âœ¨ `get_system_stats()` - è·å–ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯ï¼ˆJSONæ ¼å¼ï¼‰
- âœ¨ `get_active_sites()` - è·å–æ´»è·ƒç«™ç‚¹åˆ—è¡¨
- âœ¨ `get_site_stats(site_id)` - è·å–æŒ‡å®šç«™ç‚¹è¯¦ç»†ç»Ÿè®¡
- âœ¨ `cleanup_expired_sessions()` - æ¸…ç†è¿‡æœŸä¼šè¯

#### éƒ¨ç½²å·¥å…·
- âœ¨ æœ¬åœ°æµ‹è¯•ç¯å¢ƒé…ç½®ï¼ˆdocker-compose.local.ymlï¼‰
- âœ¨ VPSç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆdocker-compose.vps.ymlï¼‰
- âœ¨ Windowså¯åŠ¨/éªŒè¯è„šæœ¬ï¼ˆ.batï¼‰
- âœ¨ Linux/Macå¯åŠ¨/éªŒè¯è„šæœ¬ï¼ˆ.shï¼‰
- âœ¨ VPSå¯¼å‡ºè„šæœ¬ï¼ˆexport-to-vps.shï¼‰

#### æ–‡æ¡£
- ğŸ“š å®Œæ•´çš„README.mdï¼ˆåŒ…å«æ‰€æœ‰éƒ¨ç½²æ­¥éª¤ï¼‰
- ğŸ“š å¿«é€Ÿä¸Šæ‰‹æŒ‡å—ï¼ˆQUICKSTART.mdï¼‰
- ğŸ“š æ›´æ–°æ—¥å¿—ï¼ˆæœ¬æ–‡ä»¶ï¼‰
- ğŸ“š éƒ¨ç½²è¯´æ˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

### æ”¹è¿› (Changed)

#### æ•°æ®åº“é…ç½®
- ğŸ”§ ä½¿ç”¨PostgreSQL 15-alpineé•œåƒ
- ğŸ”§ å¢åŠ è¿æ¥æ± é…ç½®ï¼ˆmax_connections=200ï¼‰
- ğŸ”§ ä¼˜åŒ–å†…å­˜é…ç½®ï¼ˆshared_buffers=256MBï¼‰
- ğŸ”§ æ·»åŠ å¥åº·æ£€æŸ¥ï¼ˆpg_isreadyï¼‰

#### æƒé™ç®¡ç†
- ğŸ”§ ç²¾ç»†åŒ–æƒé™æ§åˆ¶ï¼ˆè¡¨çº§å’Œåºåˆ—çº§ï¼‰
- ğŸ”§ ç”¨æˆ·éš”ç¦»ï¼ˆæ¯ä¸ªç«™ç‚¹ç‹¬ç«‹ç”¨æˆ·ï¼‰
- ğŸ”§ ç»Ÿä¸€åé¦ˆè¡¨å…±äº«æƒé™

#### ç½‘ç»œé…ç½®
- ğŸ”§ ä½¿ç”¨Dockerç½‘ç»œåˆ«åï¼ˆpostgres_masterï¼‰
- ğŸ”§ æœ¬åœ°æµ‹è¯•ä½¿ç”¨ç‹¬ç«‹ç½‘ç»œï¼ˆlocal_test_netï¼‰
- ğŸ”§ VPSä½¿ç”¨å…±äº«ç½‘ç»œï¼ˆshared_netï¼‰

### ä¿®å¤ (Fixed)
- ğŸ› ä¿®å¤ç«™ç‚¹ç”¨æˆ·æƒé™é…ç½®é—®é¢˜
- ğŸ› ä¿®å¤è¡¨å‰ç¼€å‘½åå†²çªé—®é¢˜
- ğŸ› ä¿®å¤åˆå§‹åŒ–è„šæœ¬æ‰§è¡Œé¡ºåºé—®é¢˜

### å®‰å…¨ (Security)
- ğŸ”’ æ”¯æŒå¯†ç åŠ å¯†ï¼ˆENCRYPTED PASSWORDï¼‰
- ğŸ”’ ä¼šè¯ç®¡ç†ï¼ˆtoken_hashå’Œrefresh_token_hashï¼‰
- ğŸ”’ ç”¨æˆ·çŠ¶æ€ç®¡ç†ï¼ˆactive/suspended/deletedï¼‰
- ğŸ”’ ç™»å½•å¤±è´¥æ¬¡æ•°é™åˆ¶ï¼ˆfailed_login_attemptsï¼‰

### å·²çŸ¥é—®é¢˜
- âš ï¸ é»˜è®¤å¯†ç éœ€è¦åœ¨VPSéƒ¨ç½²æ—¶æ‰‹åŠ¨ä¿®æ”¹
- âš ï¸ æœ¬åœ°æµ‹è¯•ç¯å¢ƒä½¿ç”¨5433ç«¯å£ï¼Œé¿å…å†²çª

---

## [1.0.0] - 2024-09-30

### æ–°å¢
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ¨ åŸºç¡€PostgreSQLå®¹å™¨é…ç½®
- âœ¨ ç®€å•çš„ç«™ç‚¹ç”¨æˆ·ç®¡ç†

### å·²å¼ƒç”¨
- âš ï¸ v1.0çš„è¡¨ç»“æ„å’Œæƒé™é…ç½®å·²è¢«v2.0å®Œå…¨é‡æ–°è®¾è®¡

---

## å‡çº§æŒ‡å—

### ä» v1.0 å‡çº§åˆ° v2.0

**âš ï¸ é‡è¦ï¼šv2.0æ˜¯å®Œå…¨é‡æ–°è®¾è®¡çš„æ¶æ„ï¼Œä¸å…¼å®¹v1.0**

**æ¨èæ–¹å¼ï¼šå…¨æ–°éƒ¨ç½²**

1. å¤‡ä»½v1.0æ•°æ®ï¼ˆå¦‚æœæœ‰é‡è¦æ•°æ®ï¼‰
   ```bash
   docker exec postgres_master pg_dumpall -U admin > backup_v1.sql
   ```

2. åœæ­¢å¹¶åˆ é™¤v1.0ç³»ç»Ÿ
   ```bash
   cd /docker/db_master
   docker compose down -v
   rm -rf *
   ```

3. éƒ¨ç½²v2.0ç³»ç»Ÿ
   ```bash
   # ä¸Šä¼ å¹¶è§£å‹v2.0æ–‡ä»¶
   tar -xzf postgres-master-system.tar.gz
   
   # å¯åŠ¨æ–°ç³»ç»Ÿ
   docker compose -f docker-compose.vps.yml up -d
   ```

4. å¦‚éœ€è¿ç§»æ•°æ®ï¼Œè¯·æ‰‹åŠ¨å¯¼å…¥åˆ°æ–°è¡¨ç»“æ„

---

## åé¦ˆå’Œè´¡çŒ®

æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- GitHub Issues
- é‚®ä»¶åé¦ˆ
- å›¢é˜Ÿå†…éƒ¨æ²Ÿé€š

---

**ä¿æŒç³»ç»Ÿæ›´æ–°ï¼Œäº«å—æœ€æ–°åŠŸèƒ½ï¼** ğŸš€

